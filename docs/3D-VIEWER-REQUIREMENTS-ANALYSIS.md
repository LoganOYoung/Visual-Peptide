# 3D 展示板块 — 信息与交互需求分析（科学家 / 科研人员 / 高校教师 / 学生）

**说明**：本文从四类用户视角分析应增加的信息与交互功能，**暂不实施**，仅作产品与开发参考。

---

## 一、当前 3D 板块能力简述

- 单结构加载（PDB ID），3Dmol 渲染，cartoon + spectrum 着色。
- 拖拽旋转、滚轮缩放；顶栏「Open in RCSB」跳转官方 3D View。
- Quick load 快速选结构；与站内肽关联时展示「Open calculator / Peptide detail」。

**缺失**：残基/原子标注、点击查询、距离与角度测量、序列与二级结构信息、多着色/显示模式、教学向预设视图等。

---

## 二、按用户角色的需求分析

### 1. 科学家（结构生物学 / 药物发现 / 肽与受体）

| 需求类型 | 具体需求 | 优先级建议 |
|----------|----------|------------|
| **节点/残基标注** | 点击残基显示：残基名（如 Ser15）、链 ID、序号、可选单字母/三字母；悬停 tooltip 显示相同信息，避免画面过载。 | 高 |
| **结合位点 / 活性位点** | 对已知肽-受体复合物（如 6XBM），可高亮结合口袋或关键残基（如 GLP-1R 结合残基）；可来自预设注释或简单「选中链/残基范围」高亮。 | 高 |
| **距离与角度** | 两点间距离（如 Cα–Cα 或指定原子）、键角等；用于讨论结合几何、氢键、盐桥。 | 高 |
| **多显示模式** | 除 cartoon 外，可选：surface（静电/疏水）、stick（配体/关键残基）、ribbon；按链/配体/残基类型切换着色（如 by chain / by residue type / by B-factor）。 | 中高 |
| **链/分子控制** | 显示/隐藏指定链（如只看肽链或只看受体）；多链时标清 Chain A/B 等，便于与文献对照。 | 中高 |
| **元信息与引用** | 当前 PDB ID、标题、来源物种、方法（X-ray/EM）、分辨率（若有）；「Cite / Download PDB」链接到 RCSB，便于写论文与复现。 | 中 |

### 2. 科研人员（重复实验、协作、写报告）

| 需求类型 | 具体需求 | 优先级建议 |
|----------|----------|------------|
| **可复现视图** | 保存/分享「当前视图」：旋转角度、缩放、显示样式、高亮残基；可生成短链接或参数（如 `?pdb=6XBM&chain=A&residues=15-20`），便于在论文/报告里指向同一视角。 | 中高 |
| **截图与导出** | 一键导出当前 3D 为 PNG/SVG，用于 PPT、补充材料；可选带/不带标注。 | 中 |
| **与站内数据联动** | 从肽详情页/Compare 进入 3D 时，自动高亮该肽在结构中的链或残基范围（若 PDB 注释或站内数据有定义）。 | 中 |
| **节点标注** | 与科学家需求一致：点击/悬停显示残基编号与名称，便于在方法部分写「我们分析了残基 X–Y」。 | 高 |

### 3. 高校教师（授课、出题、统一讲解）

| 需求类型 | 具体需求 | 优先级建议 |
|----------|----------|------------|
| **预设「讲解视图」** | 教师可用的预设视角：如「结合口袋」「催化三联体」「α-helix 区域」；学生打开即看到教师希望强调的视角与高亮，减少课堂操作时间。 | 中高 |
| **标注与板书** | 在 3D 上固定显示若干关键残基标签（如「Ser15」「结合位点」），类似板书；可考虑「教师模式」：预置标注，学生端可选显示/隐藏（如先隐藏再提问）。 | 中 |
| **命名与概念** | 悬停/点击时除残基名外，可简要说明「常见于活性位点」「保守残基」等（需维护小规模教学注释库）。 | 中低 |
| **与课程材料一致** | 链 ID、残基编号与教材/PPT 一致；显示「Chain A (peptide)」「Chain B (receptor)」等，避免学生与文献对不上。 | 中 |
| **简单测验** | 如「点击图中催化残基」或「哪个残基与配体形成氢键？」（需与标注/选择交互配合，可后续扩展）。 | 低 |

### 4. 学生（理解结构、写作业、备考）

| 需求类型 | 具体需求 | 优先级建议 |
|----------|----------|------------|
| **「这是啥？」** | 点击/悬停显示残基名称（三字母 + 单字母）、序号、所在链；可选「这是什么氨基酸？」简短科普（如 Gly：最小、常出现在 turn）。 | 高 |
| **二级结构** | 显示 α-helix、β-sheet、loop 等区域，并用不同颜色或标签区分；与教材中的 ribbon 图对应，便于理解折叠与功能域。 | 中高 |
| **序列与结构对应** | 侧边或底部显示一条或多条链的序列（单字母），点击序列残基在 3D 中高亮并居中；反之点击 3D 残基在序列中高亮。 | 中高 |
| **减少认知负荷** | 默认视图不宜信息过载；「简单模式」：仅 cartoon + 少量关键标注；「详细模式」：开放残基标注、距离、多样式。 | 中 |
| **与站内其他内容联动** | 从肽库/计算器过来时，明确「这是你在算的肽的结构」，并保留「回计算器/回肽详情」入口（已有部分）。 | 已有 |

---

## 三、信息与交互功能汇总（按类型）

### 3.1 建议增加的信息

| 信息项 | 说明 | 主要受益角色 |
|--------|------|--------------|
| 残基/原子标注 | 点击或悬停显示：残基名（三字母/单字母）、链 ID、序号 | 科学家、科研、教师、学生 |
| 链 ID 与链类型 | 明确标注 Chain A/B、肽链 vs 受体链（若可识别） | 科研、教师、学生 |
| 二级结构 | α-helix / β-sheet / loop 等，可与着色或图例联动 | 教师、学生 |
| 序列条 | 单字母序列，与 3D 点击联动 | 科研、学生 |
| 结构元数据 | 分辨率、方法、物种、文献引用、Download/Cite 链接 | 科学家、科研 |
| 简单教学注释 | 如「结合位点」「催化残基」（需轻量数据或预设） | 教师、学生 |

### 3.2 建议增加的交互功能

| 交互功能 | 说明 | 主要受益角色 |
|----------|------|--------------|
| 点击/悬停标注 | 点击残基在侧栏或浮层显示详情；悬停 tooltip | 全部 |
| 残基/区域选择与高亮 | 单选或框选残基，高亮显示并可测距离/角度 | 科学家、科研、教师 |
| 距离测量 | 两点间距离（可限定原子类型，如 Cα–Cα） | 科学家、科研 |
| 角度测量 | 键角或二面角（实现成本较高，可后置） | 科学家 |
| 多显示样式 | cartoon / surface / stick；按链、按残基类型、按 B-factor 着色 | 科学家、科研、教师 |
| 链显示/隐藏 | 多链时勾选显示哪些链 | 科学家、科研、教师 |
| 预设视图/书签 | 保存或选择预设视角与高亮（如「结合口袋」） | 教师、科研 |
| 截图/导出图片 | 导出当前视图为 PNG，用于报告/PPT | 科研、教师、学生 |
| 分享链接 | URL 带视图参数，便于复现与协作 | 科研、教师 |

---

## 四、实现难度与优先级建议（不实施，仅排序）

1. **高价值且相对可行**：点击/悬停残基标注（含链 ID、序号、残基名）；链显示/隐藏；结构元信息 + Cite/Download 链接。
2. **高价值但工作量较大**：序列条与 3D 联动；距离测量；多显示样式（cartoon/surface/stick）与着色切换。
3. **教学向**：预设「讲解视图」、固定板书式标注、二级结构图例；可与教师反馈后再细化。
4. **后续扩展**：角度测量、简单测验、教学注释库、可分享视图短链接。

---

## 五、小结

- **科学家/科研人员**：最需要**节点（残基）标注、距离测量、多显示模式、链控制、元数据与引用**。
- **高校教师**：需要**预设视图、固定标注、链与残基命名清晰**，便于统一讲解和出题。
- **学生**：需要**「这是啥」的即时反馈（残基名、二级结构）、序列与 3D 对应、简单/详细模式切换**。

以上均可作为后续 3D 板块迭代的需求池；实现时建议先做「残基标注 + 链控制 + 元信息与引用」，再逐步增加测量与教学向功能。
